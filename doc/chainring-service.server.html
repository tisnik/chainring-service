<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>chainring-service.server documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Chainring-service 1.0.0-SNAPSHOT API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><a href="index.html"><span class="inner">Namespaces</span></a></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>chainring-service</span></div></div></li><li class="depth-2 branch"><a href="chainring-service.config.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>config</span></div></a></li><li class="depth-2 branch"><a href="chainring-service.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 branch"><a href="chainring-service.csv-loader.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>csv-loader</span></div></a></li><li class="depth-2 branch"><a href="chainring-service.db-interface.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>db-interface</span></div></a></li><li class="depth-2 branch"><a href="chainring-service.db-spec.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>db-spec</span></div></a></li><li class="depth-2 branch"><a href="chainring-service.drawing-utils.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>drawing-utils</span></div></a></li><li class="depth-2 branch"><a href="chainring-service.drawings-cache.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>drawings-cache</span></div></a></li><li class="depth-2 branch"><a href="chainring-service.drawings-storage.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>drawings-storage</span></div></a></li><li class="depth-2 branch"><a href="chainring-service.html-renderer.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>html-renderer</span></div></a></li><li class="depth-2 branch"><a href="chainring-service.html-renderer-help.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>html-renderer-help</span></div></a></li><li class="depth-2 branch"><a href="chainring-service.html-renderer-widgets.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>html-renderer-widgets</span></div></a></li><li class="depth-2 branch"><a href="chainring-service.http-utils.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>http-utils</span></div></a></li><li class="depth-2 branch"><a href="chainring-service.mocked-sap-interface.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>mocked-sap-interface</span></div></a></li><li class="depth-2 branch"><a href="chainring-service.raster-renderer.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>raster-renderer</span></div></a></li><li class="depth-2 branch"><a href="chainring-service.real-sap-interface.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>real-sap-interface</span></div></a></li><li class="depth-2 branch"><a href="chainring-service.rest-api.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>rest-api</span></div></a></li><li class="depth-2 branch"><a href="chainring-service.rest-api-impl.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>rest-api-impl</span></div></a></li><li class="depth-2 branch"><a href="chainring-service.rest-api-utils.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>rest-api-utils</span></div></a></li><li class="depth-2 branch"><a href="chainring-service.sap-interface.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>sap-interface</span></div></a></li><li class="depth-2 branch current"><a href="chainring-service.server.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>server</span></div></a></li><li class="depth-2"><a href="chainring-service.vector-drawing.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>vector-drawing</span></div></a></li></ul></div><div class="sidebar" id="vars"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="chainring-service.server.html#var-all-drawings-for-floor"><div class="inner"><span>all-drawings-for-floor</span></div></a></li><li class="depth-1"><a href="chainring-service.server.html#var-api-call-handler"><div class="inner"><span>api-call-handler</span></div></a></li><li class="depth-1"><a href="chainring-service.server.html#var-current-date-formatted"><div class="inner"><span>current-date-formatted</span></div></a></li><li class="depth-1"><a href="chainring-service.server.html#var-entity-count"><div class="inner"><span>entity-count</span></div></a></li><li class="depth-1"><a href="chainring-service.server.html#var-finish-processing"><div class="inner"><span>finish-processing</span></div></a></li><li class="depth-1"><a href="chainring-service.server.html#var-floor-id-.3Estr"><div class="inner"><span>floor-id-&gt;str</span></div></a></li><li class="depth-1"><a href="chainring-service.server.html#var-get-api-command"><div class="inner"><span>get-api-command</span></div></a></li><li class="depth-1"><a href="chainring-service.server.html#var-get-api-part-from-uri"><div class="inner"><span>get-api-part-from-uri</span></div></a></li><li class="depth-1"><a href="chainring-service.server.html#var-get-user-id"><div class="inner"><span>get-user-id</span></div></a></li><li class="depth-1"><a href="chainring-service.server.html#var-gui-call-handler"><div class="inner"><span>gui-call-handler</span></div></a></li><li class="depth-1"><a href="chainring-service.server.html#var-handler"><div class="inner"><span>handler</span></div></a></li><li class="depth-1"><a href="chainring-service.server.html#var-log-process-drawing-info"><div class="inner"><span>log-process-drawing-info</span></div></a></li><li class="depth-1"><a href="chainring-service.server.html#var-no-drawing-error-page"><div class="inner"><span>no-drawing-error-page</span></div></a></li><li class="depth-1"><a href="chainring-service.server.html#var-no-drawing-error-page-from-sap"><div class="inner"><span>no-drawing-error-page-from-sap</span></div></a></li><li class="depth-1"><a href="chainring-service.server.html#var-prepare-drawing-info"><div class="inner"><span>prepare-drawing-info</span></div></a></li><li class="depth-1"><a href="chainring-service.server.html#var-process-areal-info-page"><div class="inner"><span>process-areal-info-page</span></div></a></li><li class="depth-1"><a href="chainring-service.server.html#var-process-areal-list-page"><div class="inner"><span>process-areal-list-page</span></div></a></li><li class="depth-1"><a href="chainring-service.server.html#var-process-areal-page"><div class="inner"><span>process-areal-page</span></div></a></li><li class="depth-1"><a href="chainring-service.server.html#var-process-binary-list"><div class="inner"><span>process-binary-list</span></div></a></li><li class="depth-1"><a href="chainring-service.server.html#var-process-building-info-page"><div class="inner"><span>process-building-info-page</span></div></a></li><li class="depth-1"><a href="chainring-service.server.html#var-process-building-page"><div class="inner"><span>process-building-page</span></div></a></li><li class="depth-1"><a href="chainring-service.server.html#var-process-db-statistic-page"><div class="inner"><span>process-db-statistic-page</span></div></a></li><li class="depth-1"><a href="chainring-service.server.html#var-process-drawing-from-sap-page"><div class="inner"><span>process-drawing-from-sap-page</span></div></a></li><li class="depth-1"><a href="chainring-service.server.html#var-process-drawing-info"><div class="inner"><span>process-drawing-info</span></div></a></li><li class="depth-1"><a href="chainring-service.server.html#var-process-drawing-page"><div class="inner"><span>process-drawing-page</span></div></a></li><li class="depth-1"><a href="chainring-service.server.html#var-process-drawings-list"><div class="inner"><span>process-drawings-list</span></div></a></li><li class="depth-1"><a href="chainring-service.server.html#var-process-drawings-statistic-page"><div class="inner"><span>process-drawings-statistic-page</span></div></a></li><li class="depth-1"><a href="chainring-service.server.html#var-process-floor-info-page"><div class="inner"><span>process-floor-info-page</span></div></a></li><li class="depth-1"><a href="chainring-service.server.html#var-process-floor-page"><div class="inner"><span>process-floor-page</span></div></a></li><li class="depth-1"><a href="chainring-service.server.html#var-process-front-page"><div class="inner"><span>process-front-page</span></div></a></li><li class="depth-1"><a href="chainring-service.server.html#var-process-help-page"><div class="inner"><span>process-help-page</span></div></a></li><li class="depth-1"><a href="chainring-service.server.html#var-process-json-list"><div class="inner"><span>process-json-list</span></div></a></li><li class="depth-1"><a href="chainring-service.server.html#var-process-raster-preview-page"><div class="inner"><span>process-raster-preview-page</span></div></a></li><li class="depth-1"><a href="chainring-service.server.html#var-process-room-list"><div class="inner"><span>process-room-list</span></div></a></li><li class="depth-1"><a href="chainring-service.server.html#var-process-select-drawing-from-sap-page"><div class="inner"><span>process-select-drawing-from-sap-page</span></div></a></li><li class="depth-1"><a href="chainring-service.server.html#var-process-select-drawing-from-sap-page-"><div class="inner"><span>process-select-drawing-from-sap-page-</span></div></a></li><li class="depth-1"><a href="chainring-service.server.html#var-process-settings-page"><div class="inner"><span>process-settings-page</span></div></a></li><li class="depth-1"><a href="chainring-service.server.html#var-process-store-settings-page"><div class="inner"><span>process-store-settings-page</span></div></a></li><li class="depth-1"><a href="chainring-service.server.html#var-process-test"><div class="inner"><span>process-test</span></div></a></li><li class="depth-1"><a href="chainring-service.server.html#var-select-nearest-date"><div class="inner"><span>select-nearest-date</span></div></a></li><li class="depth-1"><a href="chainring-service.server.html#var-uri-.3Efile-name"><div class="inner"><span>uri-&gt;file-name</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h2 class="anchor" id="top">chainring-service.server</h2><div class="doc"><pre class="plaintext">Server module with functions to accept requests and send response back to users via HTTP.

Author: Pavel Tisnovsky</pre></div><div class="public anchor" id="var-all-drawings-for-floor"><h3>all-drawings-for-floor</h3><div class="usage"><code>(all-drawings-for-floor floor-id)</code></div><div class="doc"><pre class="plaintext">Prepares list of all drawings for specified floor.
</pre></div></div><div class="public anchor" id="var-api-call-handler"><h3>api-call-handler</h3><div class="usage"><code>(api-call-handler request uri method prefix)</code></div><div class="doc"><pre class="plaintext">This function is used to handle all API calls. Three parameters are expected:
data structure containing HTTP request, string with URI, and the HTTP method.</pre></div></div><div class="public anchor" id="var-current-date-formatted"><h3>current-date-formatted</h3><div class="usage"><code>(current-date-formatted)</code></div><div class="doc"><pre class="plaintext">Return current date formatted as yyyy-MM-dd.
</pre></div></div><div class="public anchor" id="var-entity-count"><h3>entity-count</h3><div class="usage"><code>(entity-count entities entity-type)</code></div><div class="doc"><pre class="plaintext">Count number of entities with specified entity type.
</pre></div></div><div class="public anchor" id="var-finish-processing"><h3>finish-processing</h3><div class="usage"><code>(finish-processing request response-html)</code><code>(finish-processing request response-html session)</code></div><div class="doc"><pre class="plaintext">Finish processing of HTTP requests.
</pre></div></div><div class="public anchor" id="var-floor-id-.3Estr"><h3>floor-id-&gt;str</h3><div class="usage"><code>(floor-id-&gt;str floor-id)</code></div><div class="doc"><pre class="plaintext">Converts floor-id into string.
</pre></div></div><div class="public anchor" id="var-get-api-command"><h3>get-api-command</h3><div class="usage"><code>(get-api-command uri prefix)</code></div><div class="doc"><pre class="plaintext">Retrieve the actual command from the API call.
</pre></div></div><div class="public anchor" id="var-get-api-part-from-uri"><h3>get-api-part-from-uri</h3><div class="usage"><code>(get-api-part-from-uri uri prefix)</code></div><div class="doc"><pre class="plaintext">Get API part (string) from the full URI. The API part string should not starts with /
</pre></div></div><div class="public anchor" id="var-get-user-id"><h3>get-user-id</h3><div class="usage"><code>(get-user-id request)</code></div><div class="doc"><pre class="plaintext">Get user name: it can be read from cookies or generated by database.
</pre></div></div><div class="public anchor" id="var-gui-call-handler"><h3>gui-call-handler</h3><div class="usage"><code>(gui-call-handler request uri method)</code></div><div class="doc"><pre class="plaintext">This function is used to handle all GUI calls. Three parameters are expected:
data structure containing HTTP request, string with URI, and the HTTP method.</pre></div></div><div class="public anchor" id="var-handler"><h3>handler</h3><div class="usage"><code>(handler request)</code></div><div class="doc"><pre class="plaintext">Handler that is called by Ring for all requests received from user(s).
</pre></div></div><div class="public anchor" id="var-log-process-drawing-info"><h3>log-process-drawing-info</h3><div class="usage"><code>(log-process-drawing-info project-id project-info building-id building-info floor-id floor-info drawing-id drawing-info rooms)</code></div><div class="doc"><pre class="plaintext">Log all relevant information about selected drawing.
</pre></div></div><div class="public anchor" id="var-no-drawing-error-page"><h3>no-drawing-error-page</h3><div class="usage"><code>(no-drawing-error-page request)</code></div><div class="doc"><pre class="plaintext">Error page when no drawing has been found (regular entry).
</pre></div></div><div class="public anchor" id="var-no-drawing-error-page-from-sap"><h3>no-drawing-error-page-from-sap</h3><div class="usage"><code>(no-drawing-error-page-from-sap request)</code></div><div class="doc"><pre class="plaintext">Error page when no drawing has been found (entry from SAP).
</pre></div></div><div class="public anchor" id="var-prepare-drawing-info"><h3>prepare-drawing-info</h3><div class="usage"><code>(prepare-drawing-info drawing-id drawing-data)</code></div><div class="doc"><pre class="plaintext">Prepare statistic information about drawing.
</pre></div></div><div class="public anchor" id="var-process-areal-info-page"><h3>process-areal-info-page</h3><div class="usage"><code>(process-areal-info-page request)</code></div><div class="doc"><pre class="plaintext">Function that prepares data for the page with information about selected areal.
</pre></div></div><div class="public anchor" id="var-process-areal-list-page"><h3>process-areal-list-page</h3><div class="usage"><code>(process-areal-list-page request)</code></div><div class="doc"><pre class="plaintext">Function that prepares data for the page with list of areals.
</pre></div></div><div class="public anchor" id="var-process-areal-page"><h3>process-areal-page</h3><div class="usage"><code>(process-areal-page request)</code></div><div class="doc"><pre class="plaintext">Function that prepares data for the page with list of buildings for selected areal
</pre></div></div><div class="public anchor" id="var-process-binary-list"><h3>process-binary-list</h3><div class="usage"><code>(process-binary-list request)</code></div><div class="doc"><pre class="plaintext">Function that prepares data for the page with list of drawings stored in binary format
</pre></div></div><div class="public anchor" id="var-process-building-info-page"><h3>process-building-info-page</h3><div class="usage"><code>(process-building-info-page request)</code></div><div class="doc"><pre class="plaintext">Function that prepares data for the page with information about selected building
</pre></div></div><div class="public anchor" id="var-process-building-page"><h3>process-building-page</h3><div class="usage"><code>(process-building-page request)</code></div><div class="doc"><pre class="plaintext">Function that prepares data for the page with list of floors for the selected building.
</pre></div></div><div class="public anchor" id="var-process-db-statistic-page"><h3>process-db-statistic-page</h3><div class="usage"><code>(process-db-statistic-page request)</code></div><div class="doc"><pre class="plaintext">Function that prepares data for the database statistic page.
</pre></div></div><div class="public anchor" id="var-process-drawing-from-sap-page"><h3>process-drawing-from-sap-page</h3><div class="usage"><code>(process-drawing-from-sap-page request)</code></div><div class="doc"><pre class="plaintext">Function that prepares data for the page with selected drawing.
</pre></div></div><div class="public anchor" id="var-process-drawing-info"><h3>process-drawing-info</h3><div class="usage"><code>(process-drawing-info request)</code></div><div class="doc"><pre class="plaintext">Function that prepares data for the page with information about selected drawing.
</pre></div></div><div class="public anchor" id="var-process-drawing-page"><h3>process-drawing-page</h3><div class="usage"><code>(process-drawing-page request)</code></div><div class="doc"><pre class="plaintext">Function that prepares data for the page with selected drawing.
</pre></div></div><div class="public anchor" id="var-process-drawings-list"><h3>process-drawings-list</h3><div class="usage"><code>(process-drawings-list request)</code></div><div class="doc"><pre class="plaintext">Function that prepares data for the page with list of drawings.
</pre></div></div><div class="public anchor" id="var-process-drawings-statistic-page"><h3>process-drawings-statistic-page</h3><div class="usage"><code>(process-drawings-statistic-page request)</code></div><div class="doc"><pre class="plaintext">Function that prepares data for the drawings statistic page.
</pre></div></div><div class="public anchor" id="var-process-floor-info-page"><h3>process-floor-info-page</h3><div class="usage"><code>(process-floor-info-page request)</code></div><div class="doc"><pre class="plaintext">Function that prepares data for the page with information about selected floor.
</pre></div></div><div class="public anchor" id="var-process-floor-page"><h3>process-floor-page</h3><div class="usage"><code>(process-floor-page request)</code></div><div class="doc"><pre class="plaintext">Function that prepares data for the page with list of floors.
</pre></div></div><div class="public anchor" id="var-process-front-page"><h3>process-front-page</h3><div class="usage"><code>(process-front-page request)</code></div><div class="doc"><pre class="plaintext">Function that prepares data for the front page.
</pre></div></div><div class="public anchor" id="var-process-help-page"><h3>process-help-page</h3><div class="usage"><code>(process-help-page request page-handler)</code></div><div class="doc"><pre class="plaintext">Function to render proper help page.
</pre></div></div><div class="public anchor" id="var-process-json-list"><h3>process-json-list</h3><div class="usage"><code>(process-json-list request)</code></div><div class="doc"><pre class="plaintext">Function that prepares data for the page with list of drawings stored as JSON.
</pre></div></div><div class="public anchor" id="var-process-raster-preview-page"><h3>process-raster-preview-page</h3><div class="usage"><code>(process-raster-preview-page request)</code></div><div class="doc"><pre class="plaintext">Function that prepares simple drawing preview.
</pre></div></div><div class="public anchor" id="var-process-room-list"><h3>process-room-list</h3><div class="usage"><code>(process-room-list request)</code></div><div class="doc"><pre class="plaintext">Function that prepares data for the page with list of rooms for selected floor.
</pre></div></div><div class="public anchor" id="var-process-select-drawing-from-sap-page"><h3>process-select-drawing-from-sap-page</h3><div class="usage"><code>(process-select-drawing-from-sap-page request)</code></div><div class="doc"><pre class="plaintext">Function that prepares data for the page with list of floors.
</pre></div></div><div class="public anchor" id="var-process-select-drawing-from-sap-page-"><h3>process-select-drawing-from-sap-page-</h3><div class="usage"><code>(process-select-drawing-from-sap-page- request)</code></div><div class="doc"><pre class="plaintext">Function that prepares data for the page with list of floors.
</pre></div></div><div class="public anchor" id="var-process-settings-page"><h3>process-settings-page</h3><div class="usage"><code>(process-settings-page request)</code></div><div class="doc"><pre class="plaintext">Function that prepares data for the settings page.
</pre></div></div><div class="public anchor" id="var-process-store-settings-page"><h3>process-store-settings-page</h3><div class="usage"><code>(process-store-settings-page request)</code></div><div class="doc"><pre class="plaintext">Function that prepares data for the store settings page.
</pre></div></div><div class="public anchor" id="var-process-test"><h3>process-test</h3><div class="usage"><code>(process-test request)</code></div><div class="doc"><pre class="plaintext">Function that prepares data for the test page.
</pre></div></div><div class="public anchor" id="var-select-nearest-date"><h3>select-nearest-date</h3><div class="usage"><code>(select-nearest-date today dates)</code></div><div class="doc"><pre class="plaintext">Select nearest date from the sorted list of input dates.
</pre></div></div><div class="public anchor" id="var-uri-.3Efile-name"><h3>uri-&gt;file-name</h3><div class="usage"><code>(uri-&gt;file-name uri)</code></div><div class="doc"><pre class="plaintext">Converts URI to file name.
</pre></div></div></div></body></html>